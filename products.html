<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Products — Vendimarket</title>

  <!-- Facoltativo: il tuo foglio stile globale -->
  <!-- <link rel="stylesheet" href="styles.css"> -->

  <style>
    :root{
      --primary-blue: #14c9d5;
      --bg-deep: #22313a;
      --bg-panel: #31434f;
      --text: #e9f1f5;
      --text-dim: #bcd0da;
      --card: #2b3b46;
      --chip: rgba(255,255,255,.08);
      --chip-border: rgba(255,255,255,.16);
      --ok: #1dd1a1;
      --danger: #ee5253;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif; color:var(--text); background:#0f1c24}
    h1,h2,h3{margin:0 0 .6rem}
    .section-title{font-size: clamp(28px, 4vw, 56px); font-weight: 800; text-align:center}
    .container{max-width:1200px; margin:0 auto; padding:clamp(24px,4vw,48px) 20px}

    /* Fascia dedicata alla sezione prodotti */
    .catalog-section{background: var(--bg-deep)}
    .toolbar{
      display:flex; flex-wrap:wrap; gap:12px; align-items:center;
      margin: 18px 0 10px;
    }
    .toolbar .search{flex:1 1 280px; min-width:240px}
    .toolbar input[type="search"],
    .toolbar select{
      width:100%; padding:.65rem .8rem; border-radius:12px;
      border:1px solid var(--chip-border); background:var(--chip);
      color:var(--text);
    }
    .price-filter{display:flex; align-items:center; gap:.5rem; margin-left:auto}
    .price-filter input[type="range"]{accent-color:var(--primary-blue)}
    .results-count{margin-left:auto; opacity:.8}

    /* Blocchi filtri */
    .filters-grid{
      display:grid; gap:16px; margin: 14px 0 22px;
      grid-template-columns: repeat(4, 1fr);
    }
    .filter-block{
      background: var(--bg-panel);
      border:1px solid rgba(255,255,255,.08);
      border-radius:14px; padding:16px;
    }
    .filter-block h3{color:var(--primary-blue); font-size:20px; margin-bottom:10px}
    .filter-list{display:flex; flex-wrap:wrap; gap:10px}
    .filter-tag{
      padding:.5rem .9rem; border-radius:999px; font-weight:600; color:var(--text);
      border:1px solid var(--chip-border); background: var(--chip); cursor:pointer;
      user-select:none; transition: .15s ease-in-out;
    }
    .filter-tag:hover{transform: translateY(-1px)}
    .filter-tag.active{background:var(--primary-blue); color:#00252b; border-color: transparent}

    /* Griglia prodotti */
    .state{opacity:.8; text-align:center; padding:16px}
    .products-grid{
      display:grid; gap:18px; grid-template-columns: repeat(4, 1fr);
    }
    .product-card{
      background: var(--card); border: 1px solid rgba(255,255,255,.06);
      border-radius:16px; overflow:hidden; display:flex; flex-direction:column;
    }
    .product-image{position:relative; background:#122028; aspect-ratio: 3/2; overflow:hidden}
    .product-image img{width:100%; height:100%; object-fit:cover; display:block}
    .temperature-badge{
      position:absolute; right:10px; top:10px; padding:.35rem .6rem; border-radius:999px;
      font-size:12px; background:rgba(0,0,0,.55); color:#fff; border:1px solid rgba(255,255,255,.2)
    }
    .temp-ambient{background: rgba(20,201,213,.2)}
    .temp-cold{background: rgba(52,172,224,.35)}
    .temp-frozen{background: rgba(78,115,223,.45)}

    .product-info{padding:14px}
    .product-brand{opacity:.75; font-weight:600; margin-bottom:4px}
    .product-card h3{font-size:18px; margin:0 0 8px}
    .dietary-badges{display:flex; flex-wrap:wrap; gap:6px; margin: 0 0 10px}
    .dietary-badge{font-size:12px; padding:.25rem .5rem; border-radius:8px; border:1px solid var(--chip-border); background:var(--chip)}
    .badge-vegan{border-color:#20e27a; color:#20e27a}
    .badge-keto{border-color:#8be9fd; color:#8be9fd}
    .badge-gluten-free{border-color:#feca57; color:#feca57}
    .badge-low-sugar{border-color:#c084fc; color:#c084fc}
    .product-price{font-weight:800; font-size:18px; margin-top:auto}
    .product-actions{margin-top:10px}
    .add-to-cart{
      width:100%; padding:.6rem .8rem; border-radius:10px; border:0; font-weight:700;
      color:#00252b; background:var(--primary-blue); cursor:pointer;
    }

    @media (max-width: 1100px){
      .filters-grid{grid-template-columns: 1fr 1fr}
      .products-grid{grid-template-columns: 1fr 1fr 1fr}
    }
    @media (max-width: 800px){
      .products-grid{grid-template-columns: 1fr 1fr}
    }
    @media (max-width: 520px){
      .products-grid{grid-template-columns: 1fr}
      .price-filter{width:100%; justify-content:flex-end}
    }
  </style>
</head>
<body>

  <section class="catalog-section">
    <div class="container">
      <h1 class="section-title">Browse Products</h1>

      <!-- Toolbar: search + sort + price + risultati -->
      <div class="toolbar">
        <div class="search">
          <input id="searchInput" type="search" placeholder="Search products or brands…" autocomplete="off" />
        </div>

        <select id="sortSelect" title="Sort">
          <option value="popularity">Sort: Popularity</option>
          <option value="price-low">Price: Low → High</option>
          <option value="price-high">Price: High → Low</option>
          <option value="name">Name (A–Z)</option>
          <option value="brand">Brand (A–Z)</option>
        </select>

        <label class="price-filter" for="priceSlider">
          <span>Max price</span>
          <input id="priceSlider" type="range" min="0" max="50" step="1" value="50" />
          <strong id="maxPrice">$50+</strong>
        </label>

        <span id="resultsCount" class="results-count"></span>
      </div>

      <!-- Blocchi filtri -->
      <div class="filters-grid">
        <div class="filter-block">
          <h3>Categories</h3>
          <div id="categoryFilters" class="filter-list"></div>
        </div>

        <div class="filter-block">
          <h3>Brands</h3>
          <div id="brandFilters" class="filter-list"></div>
        </div>

        <div class="filter-block">
          <h3>Temperature Zones</h3>
          <div id="temperatureFilters" class="filter-list">
            <div class="filter-tag" data-temp="ambient">Ambient</div>
            <div class="filter-tag" data-temp="cold">Cold</div>
            <div class="filter-tag" data-temp="frozen">Frozen</div>
          </div>
        </div>

        <div class="filter-block">
          <h3>Dietary Preferences</h3>
          <div id="dietaryFilters" class="filter-list">
            <div class="filter-tag" data-diet="vegan">Vegan</div>
            <div class="filter-tag" data-diet="gluten-free">Gluten-Free</div>
            <div class="filter-tag" data-diet="keto">Keto</div>
            <div class="filter-tag" data-diet="low-sugar">Low Sugar</div>
          </div>
        </div>
      </div>

      <!-- Stati + griglia -->
      <div id="loadingState" class="state">Loading…</div>
      <div id="emptyState" class="state" style="display:none">No products match your filters.</div>
      <div id="productsGrid" class="products-grid"></div>
    </div>
  </section>

  <script>
    // ========= DATASET SUPERMERCATO =========
    const CATEGORIES = [
      "Fresh Produce","Bakery","Dairy & Eggs","Pantry","Beverages","Frozen","Household"
    ];

    const BRANDS = [
      "Vendimarket","Barilla","De Cecco","Mutti","Lavazza","Illy","Galbani","Parmalat",
      "Granarolo","Rio Mare","San Pellegrino","Twinings","Tropicana","Riso Scotti","Cirio","De Nigris"
    ];

    const U = (q) => `https://source.unsplash.com/600x400/?${encodeURIComponent(q)}`;

    const PRODUCTS = [
      {name:"Red Apples (1kg)",          brand:"Vendimarket",   category:"Fresh Produce", price:2.49, temperature:"ambient", dietary:["vegan"],              img:U("apples produce grocery")},
      {name:"Bananas (1kg)",             brand:"Vendimarket",   category:"Fresh Produce", price:1.99, temperature:"ambient", dietary:["vegan","low-sugar"], img:U("bananas fruit")},
      {name:"Vine Tomatoes (500g)",      brand:"Vendimarket",   category:"Fresh Produce", price:1.89, temperature:"ambient", dietary:["vegan"],              img:U("tomatoes grocery")},
      {name:"Romaine Lettuce",           brand:"Vendimarket",   category:"Fresh Produce", price:1.49, temperature:"cold",    dietary:["vegan"],              img:U("romaine lettuce")},
      {name:"Fresh Baguette",            brand:"Vendimarket",   category:"Bakery",        price:1.20, temperature:"ambient", dietary:[],                      img:U("baguette bread")},
      {name:"Butter Croissants (2pc)",   brand:"Vendimarket",   category:"Bakery",        price:1.90, temperature:"ambient", dietary:[],                      img:U("croissant pastry")},
      {name:"Milk 1L",                   brand:"Parmalat",      category:"Dairy & Eggs",  price:1.29, temperature:"cold",    dietary:[],                      img:U("milk carton")},
      {name:"Free-range Eggs (6)",       brand:"Vendimarket",   category:"Dairy & Eggs",  price:2.10, temperature:"cold",    dietary:[],                      img:U("eggs carton")},
      {name:"Mozzarella 125g",           brand:"Galbani",       category:"Dairy & Eggs",  price:1.35, temperature:"cold",    dietary:["gluten-free"],         img:U("mozzarella cheese")},
      {name:"Greek Yogurt 500g",         brand:"Vendimarket",   category:"Dairy & Eggs",  price:2.40, temperature:"cold",    dietary:["low-sugar"],          img:U("greek yogurt")},
      {name:"Spaghetti 500g",            brand:"Barilla",       category:"Pantry",        price:1.09, temperature:"ambient", dietary:[],                      img:U("spaghetti dry pasta")},
      {name:"Passata 700g",              brand:"Mutti",         category:"Pantry",        price:1.69, temperature:"ambient", dietary:["vegan","gluten-free"], img:U("tomato passata sauce")},
      {name:"Arborio Rice 1kg",          brand:"Riso Scotti",   category:"Pantry",        price:2.49, temperature:"ambient", dietary:["vegan","gluten-free"], img:U("arborio rice raw")},
      {name:"Extra Virgin Olive Oil 1L", brand:"De Nigris",     category:"Pantry",        price:6.90, temperature:"ambient", dietary:["vegan","keto"],        img:U("olive oil bottle")},
      {name:"Canned Tuna 3x80g",         brand:"Rio Mare",      category:"Pantry",        price:4.49, temperature:"ambient", dietary:[],                      img:U("tuna can")},
      {name:"Espresso Beans 1kg",        brand:"Lavazza",       category:"Beverages",     price:12.90,temperature:"ambient", dietary:["keto","low-sugar"],    img:U("coffee beans espresso")},
      {name:"Earl Grey Tea 25 bags",     brand:"Twinings",      category:"Beverages",     price:3.20, temperature:"ambient", dietary:["vegan","low-sugar"],   img:U("earl grey tea box")},
      {name:"Orange Juice 1L",           brand:"Tropicana",     category:"Beverages",     price:2.10, temperature:"cold",    dietary:["vegan"],              img:U("orange juice bottle")},
      {name:"Sparkling Water 1L",        brand:"San Pellegrino",category:"Beverages",     price:0.89, temperature:"ambient", dietary:["vegan"],              img:U("sparkling water bottle")},
      {name:"Frozen Margherita Pizza",   brand:"Vendimarket",   category:"Frozen",        price:3.99, temperature:"frozen",  dietary:[],                      img:U("frozen pizza margherita")},
      {name:"Vanilla Gelato 500ml",      brand:"Vendimarket",   category:"Frozen",        price:3.50, temperature:"frozen",  dietary:[],                      img:U("ice cream tub vanilla")},
      {name:"Paper Towels (2-pack)",     brand:"Vendimarket",   category:"Household",     price:1.99, temperature:"ambient", dietary:[],                      img:U("paper towels roll")},
      {name:"Dish Soap 500ml",           brand:"Vendimarket",   category:"Household",     price:1.49, temperature:"ambient", dietary:[],                      img:U("dish soap bottle")}
    ];

    // ========= APP =========
    const els = {
      cat: document.getElementById('categoryFilters'),
      brand: document.getElementById('brandFilters'),
      temp: document.getElementById('temperatureFilters'),
      diet: document.getElementById('dietaryFilters'),
      grid: document.getElementById('productsGrid'),
      count: document.getElementById('resultsCount'),
      empty: document.getElementById('emptyState'),
      loading: document.getElementById('loadingState'),
      q: document.getElementById('searchInput'),
      sort: document.getElementById('sortSelect'),
      slider: document.getElementById('priceSlider'),
      maxPrice: document.getElementById('maxPrice'),
    };

    const state = { q:"", cat:null, brand:null, temps:new Set(), diets:new Set(), max:50, sort:"popularity" };

    const mkTag = (label, onClick, active=false) => {
      const d = document.createElement('div');
      d.className = 'filter-tag' + (active?' active':'');
      d.textContent = label;
      d.addEventListener('click', () => onClick(d, label));
      return d;
    };

    function seedFilters(){
      // categorie
      els.cat.innerHTML = '';
      els.cat.appendChild(mkTag('All Products', (d)=>{ [...els.cat.children].forEach(c=>c.classList.remove('active')); d.classList.add('active'); state.cat=null; render(); }, true));
      CATEGORIES.forEach(c => els.cat.appendChild(mkTag(c, (d)=>{ [...els.cat.children].forEach(c=>c.classList.remove('active')); d.classList.add('active'); state.cat=c; render(); })));

      // brand
      els.brand.innerHTML = '';
      els.brand.appendChild(mkTag('All Brands', (d)=>{ [...els.brand.children].forEach(c=>c.classList.remove('active')); d.classList.add('active'); state.brand=null; render(); }, true));
      BRANDS.forEach(b => els.brand.appendChild(mkTag(b, (d)=>{ [...els.brand.children].forEach(c=>c.classList.remove('active')); d.classList.add('active'); state.brand=b; render(); })));

      // temperature: toggle multipli
      els.temp.querySelectorAll('[data-temp]').forEach(t=>{
        t.addEventListener('click', ()=>{ t.classList.toggle('active');
          const k = t.dataset.temp; t.classList.contains('active') ? state.temps.add(k) : state.temps.delete(k); render();
        });
      });
      // dietary: toggle multipli
      els.diet.querySelectorAll('[data-diet]').forEach(t=>{
        t.addEventListener('click', ()=>{ t.classList.toggle('active');
          const k = t.dataset.diet; t.classList.contains('active') ? state.diets.add(k) : state.diets.delete(k); render();
        });
      });
    }

    function card(p){
      const dietHTML = p.dietary?.length ? `<div class="dietary-badges">${p.dietary.map(d =>
        `<span class="dietary-badge ${d==='vegan'?'badge-vegan':d==='gluten-free'?'badge-gluten-free':d==='keto'?'badge-keto':'badge-low-sugar'}">${d.replace('-',' ')}</span>`
      ).join('')}</div>` : '';

      return `
        <div class="product-card">
          <div class="product-image">
            <img src="${p.img}" alt="${p.name}" loading="lazy"
                 onerror="this.onerror=null;this.src='https://source.unsplash.com/600x400/?grocery';">
            <span class="temperature-badge ${p.temperature==='cold'?'temp-cold':p.temperature==='frozen'?'temp-frozen':'temp-ambient'}">
              ${p.temperature[0].toUpperCase()+p.temperature.slice(1)}
            </span>
          </div>
          <div class="product-info">
            <div class="product-brand">${p.brand}</div>
            <h3>${p.name}</h3>
            ${dietHTML}
            <div class="product-price">$${p.price.toFixed(2)}</div>
            <div class="product-actions"><button class="add-to-cart" aria-label="Add ${p.name} to cart">Add to Cart</button></div>
          </div>
        </div>`;
    }

    function applyFilters(list){
      return list.filter(p =>
        (!state.cat || p.category===state.cat) &&
        (!state.brand || p.brand===state.brand) &&
        (!state.temps.size || state.temps.has(p.temperature)) &&
        (!state.diets.size || [...state.diets].every(d => p.dietary?.includes(d))) &&
        (p.price <= state.max) &&
        (!state.q || (p.name + ' ' + p.brand).toLowerCase().includes(state.q))
      );
    }

    function sortList(list){
      switch(state.sort){
        case 'price-low':  return list.sort((a,b)=>a.price-b.price);
        case 'price-high': return list.sort((a,b)=>b.price-a.price);
        case 'name':       return list.sort((a,b)=>a.name.localeCompare(b.name));
        case 'brand':      return list.sort((a,b)=>a.brand.localeCompare(b.brand));
        default:           return list;
      }
    }

    function render(){
      els.loading.style.display = 'none';
      state.q = (els.q.value||'').trim().toLowerCase();
      const filtered = sortList(applyFilters(PRODUCTS.slice()));
      els.count.textContent = `${filtered.length} products`;
      els.grid.innerHTML = filtered.map(card).join('');
      els.empty.style.display = filtered.length ? 'none' : 'block';
    }

    // eventi base
    document.addEventListener('DOMContentLoaded', seedFilters);
    seedFilters();
    els.q.addEventListener('input', render);
    els.sort.addEventListener('change', (e)=>{ state.sort = e.target.value; render(); });
    els.slider.addEventListener('input', (e)=>{ state.max = +e.target.value; els.maxPrice.textContent = `$${state.max}+`; render(); });

    render();
  </script>
</body>
</html>
